"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[583],{31699:function(e,l,t){t.r(l),t.d(l,{default:function(){return Ce}});var a=t(66252),o=t(3577),s=t(49963),c=t.p+"img/Fondnav.7f50932a.png",n=t(78199);const i=e=>((0,a.dD)("data-v-7da5c1e3"),e=e(),(0,a.Cn)(),e),d={class:"container-fluid posts-content"},r={class:"row"},m={class:"col-12 col-lg-12 col-xl-12"},p={class:"card card-nav mb-4"},u={class:"card-footer"},f=i((()=>(0,a._)("img",{class:"fondLogoNavbar",src:c,alt:"",title:"Page Profil"},null,-1))),g=i((()=>(0,a._)("img",{class:"logo col-md-0",src:n,alt:""},null,-1))),v=["src"],_={class:"NameUser"},h={class:"navbar"},C={class:"link"},E={class:"powerOff"},A={class:"col-lg-12 col-xl-12"},w={class:"col-lg-12 col-xl-12 articlePost bg-white mb-3 pb-2 pt-1"},k={id:"articleUser"},b={id:"postText"},I={class:"iconComment pt-1"},D={class:"ico"},T={class:"select-wrapper"},S=i((()=>(0,a._)("label",{class:"labelImgUpload",for:"image_src"},"i",-1))),U={class:"ico"},P={class:"card mb-4"},R={class:"card-body"},N={class:"media post-head mb-3"},x=["src"],M={class:"media-body fw-bold ml-3"},y={class:"text-muted small"},O={class:"contentArticle"},z={class:""},L=["src"],F={class:"card-footer card-post-icon"},V={class:"com-com"},$=(0,a.Uk)("Donnez votre avis "),W={class:"col-lg-12 col-xl-3"},G={id:"articleUser"},Y={id:"postText"},q={class:"iconComment"},H={class:"ico"},K={class:"select-wrapper"},Q=i((()=>(0,a._)("label",{class:"labelImgUpload",for:"image_src"},"i",-1))),j=i((()=>(0,a._)("div",{class:"card-line-top"},null,-1))),Z={class:"card card-comment mb-1"},B={class:"card-body"},J={class:"media media-comment mb-1"},X=i((()=>(0,a._)("img",{src:"https://bootdey.com/img/Content/avatar/avatar3.png",class:"d-block ui-w-40 rounded-circle avatar-comment",alt:""},null,-1))),ee={class:"media-body ml-3 mt-0"},le={class:"text-muted small"},te=["src"],ae={class:"bloc-comment"},oe=i((()=>(0,a._)("div",{class:"fleche"},null,-1))),se={class:"p_comment"},ce={key:1,class:"IconEditTrash"},ne=(0,a.uE)('<div class="col-12 col-lg-12 col-xl-12" data-v-7da5c1e3><div class="card card-nav card-foot mb-4" data-v-7da5c1e3><div class="card-footer" data-v-7da5c1e3><img class="fondLogoNavbar footer-blue" src="'+c+'" alt="" title="Page Profil" data-v-7da5c1e3><img class="logo col-md-0" src="'+n+'" alt="logo groupomania" data-v-7da5c1e3><a class="contact" href="mailto:contact@groupomania.com" data-v-7da5c1e3>Contact</a></div><div class="navbar" data-v-7da5c1e3><div class="link" data-v-7da5c1e3></div><span class="powerOff" data-v-7da5c1e3></span></div></div></div>',1);function ie(e,l,t,c,n,i){const ie=(0,a.up)("fa");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",r,[(0,a._)("div",m,[(0,a._)("div",p,[(0,a._)("div",u,[f,g,(0,a._)("img",{class:"userMedia avatar",src:e.user.media,alt:""},null,8,v),(0,a._)("span",_,(0,o.zw)(e.user.firstName)+" "+(0,o.zw)(e.user.lastName),1)]),(0,a._)("div",h,[(0,a._)("div",C,[(0,a._)("span",null,[(0,a.Wm)(ie,{icon:["fas","home"],onClick:l[0]||(l[0]=e=>i.goToProfil())})])]),(0,a._)("span",E,[(0,a.Wm)(ie,{icon:["fas","power-off"],onClick:l[1]||(l[1]=e=>i.disconnect())})])])])]),(0,a._)("div",A,[(0,a._)("div",w,[(0,a._)("form",{id:"formPost",onSubmit:l[4]||(l[4]=(0,s.iM)(((...l)=>e.articlePost&&e.articlePost(...l)),["prevent"]))},[(0,a._)("div",k,[(0,a._)("div",b,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":l[2]||(l[2]=l=>e.content=l),class:"commentaire mt-3 form-control",col:"6",rows:"2",type:"text",size:"6",placeholder:"Une petite pensée à partager  ?"},null,512),[[s.nr,e.content]]),(0,a._)("div",I,[(0,a._)("div",D,[(0,a._)("span",T,[S,(0,a._)("input",{type:"file",name:"image_src",id:"image_src",onChange:l[3]||(l[3]=(...e)=>i.FileUpload&&i.FileUpload(...e))},null,32)]),(0,a._)("span",null,(0,o.zw)(e.fileSelected.name),1)]),(0,a._)("div",U,[(0,a._)("span",null,[(0,a.Wm)(ie,{icon:["far","paper-plane"],class:"Publier",onClick:i.uploadPost},null,8,["onClick"])])])])])])],32)])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataArt,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"post col-md-10 col-lg-10 col-xl-8 col-xxl-6 offset-md-1 offset-xl-2 offset-xxl-3",key:t.id},[(0,a._)("div",P,[(0,a._)("div",R,[(0,a._)("div",N,[t.user.media?((0,a.wg)(),(0,a.iD)("img",{key:0,alt:"ImageProfil",src:t.user.media,class:"d-block ui-w-40 rounded-circle"},null,8,x)):(0,a.kq)("",!0),(0,a._)("div",M,[(0,a.Uk)((0,o.zw)(t.user.lastName)+" "+(0,o.zw)()+" "+(0,o.zw)(t.user.firstName)+" ",1),(0,a._)("div",y," le: "+(0,o.zw)(i.date(t.createdAt)),1)])]),(0,a._)("p",O,(0,o.zw)(t.content),1),(0,a._)("div",z,[t.media?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"postImg",alt:"Image",src:t.media},null,8,L)):(0,a.kq)("",!0)])]),(0,a._)("div",null,[(0,a._)("div",F,[(0,a._)("div",V,[(0,a._)("span",null,[$,(0,a.Wm)(ie,{class:"d-inline-block text-muted ml-1",icon:["far","comment"],onClick:l[5]||(l[5]=l=>e.commentInput=!e.commentInput),modelValue:e.PostLiked,"onUpdate:modelValue":l[6]||(l[6]=l=>e.PostLiked=l)},null,8,["modelValue"])])]),(0,a._)("div",null,[(0,a._)("span",null,["admin"===e.user.role||e.userId===t.userId?((0,a.wg)(),(0,a.j4)(ie,{key:0,icon:["far","trash-alt"],onClick:e=>i.deleteArticle(t.id)},null,8,["onClick"])):(0,a.kq)("",!0)])])])]),(0,a._)("div",W,[(0,a.wy)((0,a._)("form",{id:"formPost",onSubmit:l[9]||(l[9]=(0,s.iM)(((...l)=>e.articleComment&&e.articleComment(...l)),["prevent"]))},[(0,a._)("div",G,[(0,a._)("div",Y,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":l[7]||(l[7]=l=>e.CommentContent=l),class:"commentaire form-control",col:"6",rows:"2",type:"text",size:"6",placeholder:"Ecrire"},null,512),[[s.nr,e.CommentContent]]),(0,a._)("div",q,[(0,a._)("div",H,[(0,a._)("span",K,[Q,(0,a._)("input",{type:"file",name:"image_src",id:"image_src",onChange:l[8]||(l[8]=(...e)=>i.FileUpload&&i.FileUpload(...e))},null,32)]),(0,a._)("span",null,(0,o.zw)(e.fileSelected.name),1)]),(0,a._)("span",null,[(0,a.Wm)(ie,{icon:["far","paper-plane"],class:"Publier",onClick:e=>i.uploadComment(t.id)},null,8,["onClick"])])])])])],544),[[s.F8,e.commentInput]])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.comment,(l=>((0,a.wg)(),(0,a.iD)("div",{class:"col-lg-12",key:l.id},[j,(0,a._)("div",Z,[(0,a._)("div",B,[(0,a._)("div",J,[X,(0,a._)("div",ee,[(0,a._)("span",null,(0,o.zw)(l.user.lastName),1),(0,a._)("span",null,(0,o.zw)(l.user.firstName),1),(0,a._)("div",le," le: "+(0,o.zw)(i.date(l.user.createdAt)),1)])]),l.media?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"imgComment",alt:"Image",src:l.media},null,8,te)):(0,a.kq)("",!0),(0,a._)("div",ae,[oe,(0,a._)("p",se,(0,o.zw)(l.comment),1)]),l.user.id===e.userId||"admin"===e.user.role?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("span",null,[(0,a.Wm)(ie,{icon:["far","trash-alt"],onClick:e=>i.deleteComment(l.id)},null,8,["onClick"])])])):(0,a.kq)("",!0)])])])))),128))])])))),128)),ne])])}var de=t(33907),re=t(30381),me=t.n(re);t(27207),t(20560);t(43653);const pe=t(6230);let ue=$cookies.get("user"),fe=ue.userId,ge=ue.token;var ve={name:"post",components:{},props:{},mounted:function(){this.userData(fe)},data:function(){return{commentInput:!1,commentContent:"",fileSelectedComment:"",articleId:"",fileSelected:"",content:"",media:"",userId:fe,token:ge,ArticleDate:""}},beforeMount:function(){this.getAllArticle()},props:{},computed:{...(0,de.mapState)({user:"userData",dataArt:"artData"})},watch:{dataArt:function(e){console.log("WATCH ARTDATA MODIF LIVE",e)},user:function(e){console.log("WATCH USER ",e)}},methods:{goToProfil:function(){this.$router.push("/profil")},disconnect(){console.log("DISCONNECT"),$cookies.remove("user"),this.user="",fe="",this.$router.push("/")},date(e){return me()(e).format("DD/MM/YYYY à hh:mm")},userData:function(e){this.$store.dispatch("getUserData",e).then((e=>{console.log(" RES-DATA-USER-CONNECT",e)})),console.log("DATA-USER-CONNECT 1",e);const l=[];console.log("UserId",l)},uploadPost:function(){if(""!=this.fileSelected||""!=this.content){if(this.fileSelected){var e=new pe;e.append("media",this.fileSelected,this.fileSelected.name),e.append("content",this.content),e.append("userId",fe),e.append("likes",0),e.append("dislikes",0),console.table("FORM DATA AVEC IMAGE 1",...e.entries())}else{e=new pe;e.append("content",this.content),e.append("userId",fe),e.append("likes",0),e.append("dislikes",0),console.table("FORM DATA SANS IMAGE ",...e.entries())}this.$store.dispatch("uploadPost",e).then((function(e){console.log(e),location.reload()})).catch((function(e){console.log(e)}))}else alert(" Votre article est vide")},FileUpload(e){console.log("EVENT",e),this.fileSelected=e.target.files[0],console.log("fichier Image ",this.fileSelected)},uploadComment:function(e){if(this.fileSelected){var l=new pe;l.append("media",this.fileSelected,this.fileSelected.name),l.append("comment",this.CommentContent),l.append("userId",fe),l.append("articleId",e),console.table("FORM DATA AVEC IMAGE 2",...l.entries())}else{l=new pe;l.append("comment",this.CommentContent),l.append("userId",fe),l.append("articleId",e),console.table("FORM DATA SANS IMAGE ",...l.entries())}this.$store.dispatch("uploadComment",l).then((function(e){location.reload(),console.log(e)})).catch((function(e){console.log(e)}))},getAllArticle:function(){this.$store.dispatch("getAllArticle").then((e=>{console.log("REPONSE GET ALL ARTICLE POST PAGE",e.data);const l=e.data;console.log("RESPONSE DATA",l);const t=l.map((e=>e.comment));console.log("POST VUE COMMENT PUSH",t)})).catch((e=>{console.log("Restons calme getAllArticle:postPage",e)}))},deleteArticle(e){console.log("USER-ID PROFIL DELETE",e);const l={id:e};this.$store.dispatch("deleteArticle",l).then((e=>{e&&(alert("Article supprimé"),location.reload())})).catch((e=>{console.log("ERREUR REQUETE  DELETE ARTICLE-----\x3e",e)}))},deleteComment(e){console.log("USER-ID COMMENT DELETE",e);const l={id:e};this.$store.dispatch("deleteComment",l).then((e=>{e&&(alert("Commentaire supprimé"),location.reload())})).catch((e=>{console.log("ERREUR REQUETE PROFIL DELETE COMMENT-----\x3e",e)}))}}},_e=t(83744);const he=(0,_e.Z)(ve,[["render",ie],["__scopeId","data-v-7da5c1e3"]]);var Ce=he}}]);
//# sourceMappingURL=583.f0cb7f66.js.map